# gendalf_task
##  Установка

1. Настроить CHANGEME значения в .shared_env
2. Переименовать .shared_env в .env
3. Убедиться, что установлены:
    - Docker ([официальная инструкция по установке](https://docs.docker.com/engine/install/))
    - Docker Compose (обычно идет вместе с Docker, но если нет — [установить отдельно](https://docs.docker.com/compose/install/))
4. В консоли перейти в корень проекта и написать docker-compose build, затем docker-compose up -d
   
Контейнеры запустятся, и приложение будет доступно по адресу localhost:8080.

Пользователя можно добавить с помощью docker-compose exec app_php php scripts/add_user.php <логин> <пароль>
   
## API

### /login
- **POST** - Принимает login и password в теле, возвращает токен сессии и время её истечения.
### /storage
Путь, по которому далее совершается основное взаимодействие с приложением.
Все маршруты в этом пути проверяют токен в заголовке auth.
#### /storage/{путь}
- **GET** - Если указан путь к каталогу - возвращает содержимое директории через пробел, если путь к файлу - присылает файл.
- **POST** - Создаёт указанную в пути папку, если её нет, и все родительские папки, если их нет. Если прикрепить файл, поместит по указанному пути. При конфликте заменяет файл - таким образом предполагается их изменять.
- **DELETE** - Удаляет содержимое пути. Рекурсивно, если указан каталог с подкаталогами.

Обращаться к корневому каталогу следует через /storage/, а не /storage
